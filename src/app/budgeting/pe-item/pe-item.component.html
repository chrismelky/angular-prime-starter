<div class="content" fxLayout="column" fxLayoutGap="0.75rem">
  <!-- Filter Panel -->
  <p-card class="filter">
    <ng-template pTemplate="header">
      <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="8px">
        <i class="pi pi-filter"></i>
        <span class="card-header-text">Filter</span>
      </div>
    </ng-template>
    <div fxLayout="column" fxLayoutGap="4px">
      <div fxLayout="row wrap" fxLayoutGap="10px">
        <div
          fxLayout="row wrap"
          fxLayoutGap="0.75rem"
          fxFlex
          fxLayoutAlign="start center"
        >
          <div fxLayout="column" fxLayoutGap="10px" fxFlex>
            <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start">

            <div class="p-field" fxFlex>
              <span class="p-float-label">
                <p-dropdown
                  id="admin_hierarchy_id"
                  optionValue="id"
                  optionLabel="name"
                  [autoDisplayFirst]="false"
                  [filter]="true"
                  class="p-inputtext-sm"
                  [options]="adminHierarchies!"
                  [(ngModel)]="admin_hierarchy_id"
                ></p-dropdown>
                <label for="admin_hierarchy_id">Admin Hierarchy </label>
              </span>
            </div>
            <div class="p-field" fxFlex>
              <span class="p-float-label">
                <p-dropdown
                  id="financial_year_id"
                  optionValue="id"
                  optionLabel="name"
                  [autoDisplayFirst]="false"
                  [filter]="true"
                  class="p-inputtext-sm"
                  [options]="financialYears!"
                  (onChange)="filterChanged()"
                  [(ngModel)]="financial_year_id"
                ></p-dropdown>
                <label for="financial_year_id">Financial Year </label>
              </span>
            </div>

              <div class="p-field" fxFlex>
                <span class="p-float-label">
                  <p-multiSelect
                    id="pe_sub_form_id"
                    optionValue="value"
                    [options]="peSubForms!"
                    [group]="true"
                    [filter]="true"
                    [selectionLimit]="1"
                    (onChange)="getPeForm($event)"
                    scrollHeight="150px"
                    [itemSize]="5"
                    [(ngModel)]="parent_sub_budget_class"
                  >
                    <ng-template let-group pTemplate="group">
                      <div class="p-d-flex p-ai-center">
                        <span>{{group.label}}</span>
                      </div>
                    </ng-template>
                  </p-multiSelect>
                  <label for="pe_sub_form_id">Personal Emolument Sub Form </label>
                </span>
              </div>
          </div>


          <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start">
            <div class="p-field" fxFlex>
              <span class="p-float-label">
                <p-dropdown
                  id="budget_class_id"
                  optionValue="id"
                  optionLabel="name"
                  [autoDisplayFirst]=false
                  [filter]="true"
                  class="p-inputtext-sm"
                  [options]="budgetClasses!"
                  (onChange)="getFundSources($event)"
                  [(ngModel)]="budget_class_id"
                ></p-dropdown>
                <label for="budget_class_id">Budget Class </label>
              </span>
            </div>
            <div class="p-field" fxFlex>
              <span class="p-float-label">
                <p-dropdown
                  id="fund_source_id"
                  optionValue="id"
                  optionLabel="name"
                  [autoDisplayFirst]="false"
                  [filter]="true"
                  class="p-inputtext-sm"
                  [options]="fundSources!"
                  (onChange)="filterChanged()"
                  [(ngModel)]="fund_source_id"
                ></p-dropdown>
                <label for="fund_source_id">Fund Source </label>
              </span>
            </div>
            <div class="p-field" fxFlex>
              <span class="p-float-label">
                <p-dropdown
                  id="section_id"
                  optionValue="id"
                  optionLabel="name"
                  [autoDisplayFirst]="false"
                  [filter]="true"
                  class="p-inputtext-sm"
                  [options]="sections!"
                  (onChange)="filterChanged()"
                  [(ngModel)]="section_id"
                ></p-dropdown>
                <label for="section_id">Planning Unit </label>
              </span>
            </div>
          </div>
         </div>
        </div>
       </div>
    </div>
  </p-card>

  <p-card>

    <!--ng-template pTemplate="caption">
      <div fxLayout="row" fxLayoutAlign="space-between center">
        <span class="card-header-text">Personal Emolument Budget Submission Items</span>
      </div>
    </ng-template -->
    <div fxLayout="row" fxLayoutAlign="start">
      <span class="card-header-text">Personal Emolument Budget Submission Items<br /><br /></span>
    </div>

    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="center">

      <table id="peTable" class="p-datatable" style="width: 100%" >
        <tr class="p-datatable-header	">
          <th *ngFor="let parent of peTableFields?.parentDefinitions" [attr.colspan]="parent.cols_span" [attr.rowspan]="parent.row_span">{{parent.field_name}}</th>
        </tr>
        <tr class="p-datatable-header	">
          <th *ngFor="let child of peTableFields?.childrenDefinitions">{{child.field_name}}</th>
        </tr>
        <tr>
          <td *ngFor="let input of peTableFields?.textInputs">
            <div *ngIf="input.is_input; else total">
              <input type="text"  pInputText >
            </div>
            <ng-template class="p-input-filled" #total>
              <div class="p-inputgroup">
                <span class="p-inputgroup-addon">62,721,234,567.00</span>
              </div>
            </ng-template>
          </td>
        </tr>
      </table>
    </div>
  </p-card>

  <p-card>
    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="end">
      <button pButton pRipple type="button" label="Add Row" icon="pi pi-plus" class="p-button-raised p-button-text"></button>
      <button pButton pRipple type="button" label="Delete Row" icon="pi pi-trash" class="p-button-raised p-button-danger p-button-text"></button>
      <button pButton pRipple type="button" label="Submit" icon="pi pi-check"></button>
    </div>
  </p-card>

</div>

<p-confirmDialog
  [breakpoints]="{ '960px': '75vw', '640px': '100vw' }"
  [style]="{ width: '50vw' }"
  header="Confirmation Delete Pe Item"
  icon="pi pi-exclamation-triangle"
></p-confirmDialog>
