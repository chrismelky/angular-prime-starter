<div class="dialog-content">
  <form
    name="editForm"
    role="form"
    novalidate
    (ngSubmit)="save()"
    [formGroup]="editForm"
  >
    <div fxLayout="column" fxLayoutGap="1rem">
      <!-- Generic Target -->
      <div class="p-field" fxFlex>
        <span class="p-float-label">
          <p-dropdown
            id="generic_target_id"
            optionValue="id"
            optionLabel="description"
            [autoDisplayFirst]="false"
            [filter]="true"
            class="p-inputtext-sm"
            appendTo="body"
            [options]="genericTargets!"
            formControlName="generic_target_id"
          ></p-dropdown>
          <label for="generic_target_id">Generic Target </label>
        </span>
        <span
          *ngIf="
            editForm.get('generic_target_id')!.invalid &&
            (editForm.get('generic_target_id')!.dirty ||
              editForm.get('generic_target_id')!.touched ||
              formError)
          "
        >
          <small
            class="p-error"
            *ngIf="editForm.get('generic_target_id')?.errors?.required"
            >Generic Target is required.</small
          >
        </span>
      </div>
      <!-- Areas -->
      <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start">
        <!-- Admin Levels -->
        <div class="p-field" fxFlex>
          <span class="p-float-label">
            <p-multiSelect
              id="adminLevels"
              [filter]="true"
              dataKey="position"
              optionLabel="name"
              class="p-inputtext-sm"
              appendTo="body"
              [options]="adminHierarchyLevels!"
              formControlName="admin_hierarchy_levels"
            ></p-multiSelect>
            <label for="adminLevels">Admin Hierarchy Levels</label>
          </span>
          <span
            *ngIf="
              editForm.get('admin_hierarchy_levels')!.invalid &&
              (editForm.get('admin_hierarchy_levels')!.dirty ||
                editForm.get('admin_hierarchy_levels')!.touched ||
                formError)
            "
          >
            <small
              class="p-error"
              *ngIf="editForm.get('admin_hierarchy_levels')?.errors?.required"
              >Admin hierarchy levels is required.</small
            >
          </span>
        </div>
        <!-- Sections -->
        <div class="p-field" fxFlex>
          <span class="p-float-label">
            <p-multiSelect
              id="sections"
              [filter]="true"
              dataKey="id"
              optionLabel="name"
              class="p-inputtext-sm"
              appendTo="body"
              [options]="sections!"
              formControlName="sections"
            ></p-multiSelect>
            <label for="sections">Cost Centres</label>
          </span>
          <span
            *ngIf="
              editForm.get('sections')!.invalid &&
              (editForm.get('sections')!.dirty ||
                editForm.get('sections')!.touched ||
                formError)
            "
          >
            <small
              class="p-error"
              *ngIf="editForm.get('sections')?.errors?.required"
              >Cost Centres is required.</small
            >
          </span>
        </div>
      </div>
      <!-- Description -->
      <div class="p-field" fxFlex>
        <span class="p-float-label">
          <input id="description" formControlName="description" pInputText />
          <label for="description">Description </label>
        </span>
        <span
          *ngIf="
            editForm.get('description')!.invalid &&
            (editForm.get('description')!.dirty ||
              editForm.get('description')!.touched ||
              formError)
          "
        >
          <small
            class="p-error"
            *ngIf="editForm.get('description')?.errors?.required"
            >Description is required.</small
          >
        </span>
      </div>
      <!-- Params -->
      <div class="p-field" fxFlex>
        <span class="p-float-label">
          <input id="params" type="text" pInputText formControlName="params" />
          <label for="params">Params </label>
        </span>
        <span
          *ngIf="
            editForm.get('params')!.invalid &&
            (editForm.get('params')!.dirty ||
              editForm.get('params')!.touched ||
              formError)
          "
        >
          <small
            class="p-error"
            *ngIf="editForm.get('params')?.errors?.required"
            >Params is required.</small
          >
        </span>
      </div>

      <!-- Budget classes -->
      <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start">
        <!-- Main Budget class -->
        <div class="p-field" fxFlex>
          <span class="p-float-label">
            <p-dropdown
              #mainBudgetClass
              id="main_budget_class_id"
              appendTo="body"
              [autoDisplayFirst]="false"
              [filter]="true"
              formControlName="main_budget_class_id"
              [options]="mainBudgetClasses!"
              (onChange)="loadBudgetClasses(mainBudgetClass.value)"
              optionValue="id"
              optionLabel="name"
              class="p-inputtext-sm"
            ></p-dropdown>
            <label for="main_budget_class_id">Main Budget Class </label>
          </span>
        </div>

        <!-- Sub  Budget class -->
        <div class="p-field" fxFlex>
          <span class="p-float-label">
            <p-dropdown
              #budgetClass
              id="budget_class_id"
              [autoDisplayFirst]="false"
              [filter]="true"
              formControlName="budget_class_id"
              [options]="budgetClasses!"
              (onChange)="loadFundSources(budgetClass.value)"
              optionValue="id"
              optionLabel="name"
              class="p-inputtext-sm"
            ></p-dropdown>
            <label for="budget_class_id">Budget Class </label>
          </span>
        </div>

        <div class="p-field" fxFlex>
          <span class="p-float-label">
            <p-dropdown
              #project
              id="project_id"
              optionValue="id"
              optionLabel="name"
              [autoDisplayFirst]="false"
              [filter]="true"
              class="p-inputtext-sm"
              appendTo="body"
              [options]="projects!"
              formControlName="project_id"
            ></p-dropdown>
            <label for="project_id">Project </label>
          </span>
        </div>
      </div>

      <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start">
        <!-- Activity type -->
        <div class="p-field" fxFlex>
          <span class="p-float-label">
            <p-dropdown
              #activityType
              id="activity_type_id"
              optionValue="id"
              optionLabel="name"
              [autoDisplayFirst]="false"
              [filter]="true"
              class="p-inputtext-sm"
              appendTo="body"
              (onChange)="loadActivityTaskNature(activityType.value)"
              [options]="activityTypes!"
              formControlName="activity_type_id"
            ></p-dropdown>
            <label for="activity_type_id">Activity Type </label>
          </span>
        </div>
        <!-- Activity task nature -->
        <div class="p-field" fxFlex>
          <span class="p-float-label">
            <p-dropdown
              id="activity_task_nature_id"
              optionValue="id"
              optionLabel="name"
              [autoDisplayFirst]="false"
              [filter]="true"
              class="p-inputtext-sm"
              appendTo="body"
              [options]="activityTaskNatures!"
              formControlName="activity_task_nature_id"
            ></p-dropdown>
            <label for="activity_task_nature_id">Activity Task Nature </label>
          </span>
        </div>
      </div>

      <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="center">
        <!-- Fund source -->
        <div class="p-field" fxFlex>
          <span class="p-float-label">
            <p-multiSelect
              id="fund_sources"
              [filter]="true"
              display="chip"
              dataKey="id"
              formControlName="fund_sources"
              [options]="fundSources!"
              optionLabel="name"
              class="p-inputtext-sm"
              appendTo="body"
            ></p-multiSelect>
            <label for="fund_sources">
              <span>Fund Sources </span>
            </label>
          </span>
        </div>
      </div>
      <!-- Inidcator -->
      <div class="p-field" fxFlex>
        <span class="p-float-label">
          <input id="indicator" formControlName="indicator" pInputText />
          <label for="indicator">Intermidiate Indicator </label>
        </span>
      </div>
      <!-- Is activive -->
      <div fxLayout="row" fxLayoutGap="8px">
        <p-inputSwitch
          id="is_active"
          name="is_active"
          formControlName="is_active"
        ></p-inputSwitch>
        <label for="is_active">Is Active </label>
      </div>

      <!-- Priority area -->
      <div class="p-field" fxFlex>
        <span class="p-float-label">
          <p-dropdown
            #priority
            id="priority_area_id"
            optionValue="id"
            optionLabel="description"
            [autoDisplayFirst]="false"
            [filter]="true"
            (onChange)="priorityChanged(priority.value)"
            class="p-inputtext-sm"
            appendTo="body"
            [options]="priorityAreas!"
            formControlName="priority_area_id"
          ></p-dropdown>
          <label for="priority_area_id">Priority Area </label>
        </span>
        <span
          *ngIf="
            editForm.get('priority_area_id')!.invalid &&
            (editForm.get('priority_area_id')!.dirty ||
              editForm.get('priority_area_id')!.touched ||
              formError)
          "
        >
        </span>
      </div>
      <!-- Intevetion -->
      <div class="p-field" fxFlex>
        <span class="p-float-label">
          <p-dropdown
            id="intervention_id"
            optionValue="id"
            optionLabel="description"
            [autoDisplayFirst]="false"
            [filter]="true"
            class="p-inputtext-sm"
            appendTo="body"
            [options]="interventions!"
            formControlName="intervention_id"
          ></p-dropdown>
          <label for="intervention_id">Intervention </label>
        </span>
        <span
          *ngIf="
            editForm.get('intervention_id')!.invalid &&
            (editForm.get('intervention_id')!.dirty ||
              editForm.get('intervention_id')!.touched ||
              formError)
          "
        >
        </span>
      </div>
      <!-- generic sector problem -->
      <div class="p-field" fxFlex>
        <span class="p-float-label">
          <p-dropdown
            id="generic_sector_problem_id"
            optionValue="id"
            optionLabel="description"
            [autoDisplayFirst]="false"
            [filter]="true"
            class="p-inputtext-sm"
            appendTo="body"
            [options]="genericSectorProblems!"
            formControlName="generic_sector_problem_id"
          ></p-dropdown>
          <label for="generic_sector_problem_id">Generic Sector Problem </label>
        </span>
        <span
          *ngIf="
            editForm.get('generic_sector_problem_id')!.invalid &&
            (editForm.get('generic_sector_problem_id')!.dirty ||
              editForm.get('generic_sector_problem_id')!.touched ||
              formError)
          "
        >
        </span>
      </div>

      <div fxLayout="row" fxLayoutGap="0.75rem">
        <span fxFlex></span>
        <button
          class="p-button-raised"
          icon="pi pi-check"
          label="Save"
          pButton
          type="submit"
        ></button>
      </div>
    </div>
  </form>
</div>
